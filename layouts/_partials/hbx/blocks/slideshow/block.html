{{/* Hugo Blox: Slideshow Section */}}
{{/* Documentation: https://hugoblox.com/blocks/ */}}
{{/* License: https://github.com/HugoBlox/hugo-blox-builder/blob/main/LICENSE.md */}}

{{/* Initialise */}}
{{ $page := .wcPage }}
{{ $block := .wcBlock }}
<div class="slideshow-section {{ $block.design.css_class }}" style="background-color: {{ $block.design.background.color }};" data-slideshow>
  <div class="container mx-auto py-12">
    {{ with $block.content.title }}
    <h2 class="mb-4 text-4xl tracking-tight font-extrabold text-gray-900 dark:text-white text-center">{{ . | markdownify }}</h2>
    {{ end }}
    {{ with $block.content.text }}
    <p class="text-gray-500 sm:text-xl dark:text-gray-400 text-center">{{ . | $page.RenderString | emojify }}</p>
    {{ end }}
    <div class="mt-8 grid grid-cols-1 gap-8">
      {{ range $index, $item := $block.content.items }}
        <div class="item text-center{{ if eq $index 0 }} is-active{{ end }}" style="{{ if eq $index 0 }}display: block;{{ else }}display: none;{{ end }}">
            <div class="max-w-screen-md mx-auto ">
                <svg class="h-16 mx-auto mb-3 text-gray-400 dark:text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32">
                  <path d="M9.563 8.469l-0.813-1.25c-5.625 3.781-8.75 8.375-8.75 12.156 0 3.656 2.688 5.375 4.969 5.375 2.875 0 4.906-2.438 4.906-5 0-2.156-1.375-4-3.219-4.688-0.531-0.188-1.031-0.344-1.031-1.25 0-1.156 0.844-2.875 3.938-5.344zM21.969 8.469l-0.813-1.25c-5.563 3.781-8.75 8.375-8.75 12.156 0 3.656 2.75 5.375 5.031 5.375 2.906 0 4.969-2.438 4.969-5 0-2.156-1.406-4-3.313-4.688-0.531-0.188-1-0.344-1-1.25 0-1.156 0.875-2.875 3.875-5.344z"/>
                </svg>
                <blockquote>
                  <p class="text-2xl font-medium text-gray-900 dark:text-white">"{{ $item.text }}"</p>
                </blockquote>
                {{ $img := resources.Get $item.image }}
                <div class="flex items-center justify-center mt-6 space-x-3">
                    {{ if $img }}
                    <img class="w-12 h-12 rounded-full" src="{{ $img.RelPermalink }}" alt="{{ $item.name }}"/>
                    {{ end }}
                    <div class="flex flex-col items-center">
                        <div class="pr-3 font-medium text-gray-900 dark:text-white">{{ $item.name }}</div>
                        <div class="pl-3 text-sm font-light text-gray-500 dark:text-gray-400">{{ $item.role }}</div>
                    </div>
                </div>
            </div>
        </div>
      {{ end }}
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var root = document.querySelector('[data-slideshow]');
    if (!root) return;
    var items = root.querySelectorAll('.item');
    if (!items || items.length <= 1) return;
    var index = 0;
    setInterval(function () {
      items[index].style.display = 'none';
      items[index].classList.remove('is-active');
      index = (index + 1) % items.length;
      items[index].style.display = 'block';
      items[index].classList.add('is-active');
    }, 6000);
  });
</script>
